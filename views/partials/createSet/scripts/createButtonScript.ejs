<script>
    $(document).ready(function() {
        $('#createButton').click(function (){
            var toSave = $selectedTable.bootstrapTable('getData');
            var total = calculateTotal();
            var text = $('#setName').val();
            if(total !== 1 || !(text)){
                initToast.show();
            }else{
                var forToSave = [];
                toSave.forEach(p => {
                    forToSave.push({ANSWER: p.ANSWER, CATEGORY_NAME: p.CATEGORY_NAME, FREQUENCY: p.FREQUENCY, ID: p.ID});
                });
                var set = {
                    cat14: $('#cat14').val(),
                    cat15: $('#cat15').val(),
                    cat16: $('#cat16').val(),
                    cat17: $('#cat17').val(),
                    cat18: $('#cat18').val(),
                    cat19: $('#cat19').val(),
                    cat20: $('#cat20').val(),
                    cat21: $('#cat21').val(),
                    cat22: $('#cat22').val(),
                    cat25: $('#cat25').val(),
                    cat26: $('#cat26').val(),
                    answerLines: forToSave,
                    name: text
                }
                $.ajax({
                    type: "POST",
                    url: "/sets/create",
                    data: JSON.stringify(set),
                    contentType: 'application/json',
                    success: function(res){
                        window.location.href = "/sets";
                    }.bind(this),
                    error: function(xhr, status, err){
                        console.error(xhr, status, err.toString());
                    }.bind(this)
                });
            }
        });
    });
</script>